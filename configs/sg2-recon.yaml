# ğŸ”­ SG-2 Recon é…ç½®æ–‡ä»¶
# éƒ¨ç½²ä½ç½®: ~/.openclaw/fleet.yaml
# èŠ‚ç‚¹: GPD MicroPC2 (DESKTOP-1156LM3)
# æ¨¡å¼: çº¯APIæ¨ç† (ç¡¬ä»¶ä¸è¶³ä»¥æ”¯æŒæœ¬åœ°Ollama)

fleet:
  name: "SGC Expedition Fleet"
  node_id: sg2-recon
  role: worker
  worker_type: mobile_recon
  location: gpd-micropc2
  mode: api_only  # çº¯APIæ¨¡å¼
  
# ç½‘ç»œé…ç½®
network:
  bind: 0.0.0.0
  port: 18789
  tailscale_ip: 100.64.0.3  # ä¿®æ”¹ä¸ºå®é™…IP
  
  upstream_node:
    endpoint: http://100.64.0.1:18789  # SGC Command
    token: ${SGC_TOKEN}
    
  # ç¦»çº¿æ¨¡å¼æ£€æµ‹
  offline_detection:
    enabled: true
    check_interval: 30
    timeout: 10
    retries: 3
    
  # ç½‘ç»œçŠ¶æ€ç›‘æ§
  connectivity_check:
    enabled: true
    targets:
      - https://api.openai.com
      - https://api.deepseek.com
      - http://100.64.0.1:18789  # SGC Command

# æœ¬åœ°æ¨¡å‹é…ç½® (ç¦ç”¨ - ç¡¬ä»¶ä¸è¶³)
ollama:
  enabled: false
  reason: "GPD MicroPC2 ç¡¬ä»¶ä¸è¶³ä»¥è¿è¡Œæœ¬åœ°æ¨¡å‹"

# API æ¨¡å‹é…ç½® (ä¸»è¦æ¨ç†æ–¹å¼)
models:
  provider: zai
  default: zai/glm-5
  fallback: moonshot/k2.5
  fast: zai/glm-4.7-flash
  
  # API é…ç½®
  api_config:
    timeout: 120
    retry: 3
    concurrent: 3  # é™åˆ¶å¹¶å‘æ•°
    
  # ç½‘ç»œä¸å¯ç”¨æ—¶çš„é™çº§ç­–ç•¥
  offline_strategy:
    enabled: true
    action: queue_and_retry  # æ’é˜Ÿç­‰å¾…ç½‘ç»œæ¢å¤
    max_wait: 300  # æœ€å¤šç­‰å¾…5åˆ†é’Ÿ
    notify_user: true

# æ¨¡å‹é€‰æ‹©ç­–ç•¥ (çº¯API)
model_selection:
  default: zai/glm-5
  
  rules:
    - condition: "complexity == 'low'"
      model: zai/glm-4.7-flash
      
    - condition: "language == 'chinese'"
      model: zai/glm-5
      
    - condition: "task_type == 'code'"
      model: zai/glm-5
      
    - condition: "offline == true"
      action: queue_and_notify
      message: "ç½‘ç»œä¸å¯ç”¨ï¼Œä»»åŠ¡å·²æ’é˜Ÿç­‰å¾…æ¢å¤"

# ç¡¬ä»¶èµ„æºç®¡ç† (GPD MicroPC2)
hardware:
  cpu:
    max_threads: 3  # ç•™1çº¿ç¨‹ç»™ç³»ç»Ÿ
    thermal_throttle: true
    
  memory:
    max_ram_usage: 6GB  # ç•™1.6GBç»™ç³»ç»Ÿ
    swap_warning: 90
    
  # æ— GPU
  gpu:
    enabled: false
    
  # æ— æœ¬åœ°æ¨¡å‹ï¼Œå†…å­˜ä¸»è¦ç”¨äºç³»ç»Ÿå’Œå…¶ä»–åº”ç”¨
  no_local_models: true

# ç”µæºç®¡ç† (ç§»åŠ¨è®¾å¤‡)
power:
  battery_aware: true
  
  profiles:
    ac_power:
      api_timeout: 120
      retry_count: 3
      
    battery_high:
      api_timeout: 90
      retry_count: 2
      
    battery_low:
      api_timeout: 60
      retry_count: 1
      disable_browser: true
      
    battery_critical:
      mode: minimal
      api_timeout: 30
      wake_on_message: true

# ä»»åŠ¡é˜Ÿåˆ—
queue:
  enabled: true
  max_depth: 10  # å°é˜Ÿåˆ—
  timeout: 120   # 2åˆ†é’Ÿè¶…æ—¶
  
  # ç¦»çº¿æ—¶ä»»åŠ¡å¤„ç†
  offline_handling:
    action: queue
    max_queue_size: 20
    auto_retry_on_reconnect: true

# æ–‡ä»¶ç³»ç»Ÿ
filesystem:
  workspace: ~/.openclaw/workspace
  temp: /tmp/openclaw
  max_file_size: 50MB
  
  # é™åˆ¶æ–‡ä»¶ç±»å‹
  allowed_extensions:
    - .md
    - .txt
    - .py
    - .json
    - .yaml

# æµè§ˆå™¨é…ç½® (GPDä¸Šæœ‰Chromium)
browser:
  enabled: true
  profile: openclaw
  headless: true
  no_sandbox: true
  
  # ç§»åŠ¨åœºæ™¯ä¸‹çš„è‡ªåŠ¨åŒ–
  use_cases:
    - web_fetch
    - form_filling
    - screenshot

# ç¦»çº¿æ¨¡å¼ (çº¯APIä¸‹çš„ç¦»çº¿èƒ½åŠ›)
offline:
  enabled: true
  
  # ç¦»çº¿æ—¶å¯ç”¨çš„åŠŸèƒ½ (çº¯æœ¬åœ°æ“ä½œ)
  capabilities:
    - file_read
    - file_write
    - code_edit
    - basic_search (æœ¬åœ°æ–‡ä»¶)
    - local_shell_commands
    
  # ç¦»çº¿æ—¶ä¸å¯ç”¨çš„åŠŸèƒ½
  disabled_capabilities:
    - web_search
    - web_fetch
    - api_models
    - llm_inference
    - sessions_spawn (å¤–éƒ¨èŠ‚ç‚¹)
  
  # ç½‘ç»œæ¢å¤åè‡ªåŠ¨å¤„ç†
  sync_on_reconnect:
    - process_queued_tasks
    - sync_memory
    - notify_user

# ä¾¿æºç‰¹æ€§
portable:
  quick_start: true
  suspend_on_lid_close: true
  resume_on_lid_open: true
  
  # å¿«é€Ÿå”¤é†’é…ç½®
  keep_warm: false  # æ— æœ¬åœ°æ¨¡å‹ï¼Œæ— éœ€é¢„çƒ­
  
  hot_standby_timeout: 300  # 5åˆ†é’Ÿæ— ä»»åŠ¡è¿›å…¥å¾…æœº

# å®‰å…¨è®¾ç½®
security:
  auth_mode: token
  accept_from:
    - sgc-command
    - self  # å…è®¸æœ¬åœ°ç›´æ¥è®¿é—®
    
  # ç§»åŠ¨è®¾å¤‡é¢å¤–å®‰å…¨
  auto_lock:
    enabled: false  # å¯è‡ªè¡Œå¯ç”¨
    timeout: 300
    
  encryption:
    memory_files: false  # æ€§èƒ½è€ƒè™‘
    credentials: true

# ç›‘æ§ (è½»é‡)
monitoring:
  enabled: true
  
  metrics:
    - cpu_utilization
    - ram_usage
    - battery_level
    - network_status
    - api_latency
    - queue_depth
    
  alerts:
    low_battery:
      threshold: 20
      action: notify_and_throttle
      
    high_temp:
      threshold: 80
      action: throttle
      
    network_down:
      action: queue_tasks
      notify: true

# æ—¥å¿—
logging:
  level: info
  file: ~/.openclaw/logs/sg2-recon.log
  max_size: 100MB
  max_files: 3
  
  # ç§»åŠ¨åœºæ™¯æ—¥å¿—å‹ç¼©
  compress_old: true

# GPD MicroPC2 ç¡¬ä»¶è§„æ ¼å‚è€ƒ
# CPU: AMD Ryzen 7 8840HS (8æ ¸ï¼Œä½†æ­¤èŠ‚ç‚¹é™åˆ¶3çº¿ç¨‹)
# RAM: 8GB (6GBå¯ç”¨)
# GPU: AMD Radeon 780M (ä¸ç”¨äºæ¨ç†)
# å­˜å‚¨: 512GB SSD
# ç½‘ç»œ: WiFi 6 + Tailscale VPN
# 
# æ³¨æ„: æ­¤èŠ‚ç‚¹ä½¿ç”¨çº¯APIæ¨ç†ï¼Œä¸æ”¯æŒæœ¬åœ°æ¨¡å‹è¿è¡Œ
