# â­ SGC Command é…ç½®æ–‡ä»¶
# éƒ¨ç½²ä½ç½®: ~/.openclaw/fleet.yaml
# èŠ‚ç‚¹: æœ¬åœ°GPUæœåŠ¡å™¨ (ZD-PC)
# è§’è‰²: æŒ‡æŒ¥ä¸­å¿ƒ + GPUè®¡ç®—ä¸­å¿ƒ

fleet:
  name: "Stargate SGC Expedition Fleet"
  node_id: sgc-command
  role: command_center
  location: zd-pc-wsl2
  mode: api_with_gpu  # APIæ¨¡å¼ + GPUæœ¬åœ°è®¡ç®—
  
# ç½‘ç»œé…ç½®
network:
  bind: 0.0.0.0  # ç›‘å¬æ‰€æœ‰æ¥å£ï¼Œå…è®¸å…¶ä»–èŠ‚ç‚¹è®¿é—®
  port: 18789
  tailscale_ip: 100.64.0.1  # ä¿®æ”¹ä¸ºå®é™…Tailscale IP
  
  # ä¸‹æ¸¸èŠ‚ç‚¹é…ç½®
  downstream_nodes:
    atlantis-expedition:
      endpoint: http://100.64.0.2:18789  # Atlantisçš„Tailscale IP
      token: ${ATLANTIS_TOKEN}
      enabled: true
      capabilities:
        - international_access
        - api_inference
        - backup_compute
        
    sg2-recon:
      endpoint: http://100.64.0.3:18789  # SG-2çš„Tailscale IP
      token: ${SG2_TOKEN}
      enabled: true
      capabilities:
        - offline_mode
        - portable
        - lightweight_inference

# æ¨¡å‹é…ç½® (çº¯APIæ¨¡å¼)
models:
  provider: zai
  default: zai/glm-5
  fallback: moonshot/k2.5
  fast: zai/glm-4.7-flash
  code: zai/glm-5
  
  api_config:
    timeout: 120
    retry: 3
    concurrent: 10

# æœ¬åœ°æ¨¡å‹é…ç½® (ç¦ç”¨å¤§æ¨¡å‹ï¼Œä¿ç•™è½»é‡åŠŸèƒ½)
ollama:
  enabled: false  # ä¸è¿è¡Œå¤§æ¨¡å‹ï¼Œçº¯APIæ¨¡å¼

# GPUè®¡ç®—é…ç½® (ç”¨äºéLLMä»»åŠ¡)
gpu_compute:
  enabled: true
  device: nvidia
  
  services:
    image_processing:
      enabled: true
      models:
        - stable-diffusion-xl  # å›¾åƒç”Ÿæˆ
        - controlnet          # å›¾åƒæ§åˆ¶
      
    audio_processing:
      enabled: true
      models:
        - whisper-large-v3    # è¯­éŸ³è¯†åˆ«
        - bark                # è¯­éŸ³åˆæˆ
      
    embedding:
      enabled: true
      model: BAAI/bge-large-zh-v1.5
      device: cuda
      
    local_ml:
      enabled: true
      tasks:
        - classification
        - object_detection

# ç¡¬ä»¶èµ„æºç®¡ç†
hardware:
  cpu:
    max_threads: 64  # ç•™8çº¿ç¨‹ç»™ç³»ç»Ÿ
    
  gpu:
    device: nvidia
    max_vram_usage: 11000  # ç•™1GBç»™ç³»ç»Ÿ
    
  memory:
    max_ram_usage: 56GB  # ç•™6GBç»™ç³»ç»Ÿ

# ä»»åŠ¡é˜Ÿåˆ—
queue:
  enabled: true
  max_depth: 50
  timeout: 300
  
  priority_levels:
    - critical: 1
    - high: 3
    - normal: 5
    - low: 10

# ä»»åŠ¡è·¯ç”±è§„åˆ™
routing:
  default_target: self
  
  rules:
    # GPUè®¡ç®—ä»»åŠ¡ - æœ¬åœ°å¤„ç†
    - name: gpu_compute
      condition: "task_type == 'image_processing' OR task_type == 'audio_processing'"
      target: self
      priority: 1
      
    # ä»£ç ç”Ÿæˆ - æœ¬åœ°å¤„ç† (GLM-5 + 72çº¿ç¨‹)
    - name: code_generation
      condition: "task_type == 'code'"
      target: self
      priority: 2
      
    # é•¿æ–‡æ¡£åˆ†æ - æœ¬åœ°å¤„ç† (å¤§å†…å­˜ä¼˜åŠ¿)
    - name: long_document
      condition: "doc_size > 10000 OR task_type == 'rag'"
      target: self
      priority: 2
      
    # å›½é™…èµ„æºè®¿é—® - Atlantis
    - name: international_access
      condition: "resource_location == 'international' OR task_type == 'web_fetch_international'"
      target: atlantis-expedition
      priority: 3
      
    # ç®€å•é—®ç­” - æœ¬åœ°å¤„ç†
    - name: simple_chat
      condition: "task_type == 'chat' AND complexity == 'low'"
      target: self
      priority: 5
      
    # ç¦»çº¿ä»»åŠ¡ - SG-2
    - name: offline_mode
      condition: "offline == true OR source_node == 'sg2-recon'"
      target: sg2-recon
      priority: 6

# æ–‡ä»¶ç³»ç»Ÿ
filesystem:
  workspace: ~/.openclaw/workspace
  temp: /tmp/openclaw
  max_file_size: 500MB
  
  # å…è®¸å¤„ç†çš„å¤§æ–‡ä»¶ç±»å‹
  allowed_extensions:
    - .md
    - .txt
    - .py
    - .js
    - .json
    - .yaml
    - .pdf
    - .docx
    - .png
    - .jpg
    - .wav
    - .mp3

# RAGé…ç½® (æœ¬åœ°embedding + APIç”Ÿæˆ)
rag:
  enabled: true
  vector_store: fais
  embedding_model: local/BAAI/bge-large-zh-v1.5
  max_document_size: 100MB
  chunk_size: 1000
  chunk_overlap: 200
  top_k: 5
  generation_model: zai/glm-5

# ä»£ç å·¥å…·
code_tools:
  enabled: true
  
  compilation:
    parallel_jobs: 64
    timeout: 300
    
  languages:
    python:
      version: "3.10"
      venv_path: ~/.venvs
      
    nodejs:
      version: "22"
      
    rust:
      enabled: true
      
    cpp:
      compiler: g++
      std: c++17

# æµè§ˆå™¨é…ç½®
browser:
  enabled: true
  profile: openclaw
  headless: true
  no_sandbox: true

# é€šé“é…ç½® (ä¸»è¦å…¥å£)
channels:
  qqbot:
    enabled: true
    account_id: default
    
  discord:
    enabled: true
    
  telegram:
    enabled: false
    
  whatsapp:
    enabled: false

# å…¨å±€è®°å¿†é…ç½®
memory:
  type: filesystem
  path: ~/.openclaw/memory
  sync_interval: 300
  
  sync_files:
    - MEMORY.md
    - AGENTS.md
    - USER.md
    - SOUL.md

# å®‰å…¨è®¾ç½®
security:
  auth_mode: token
  token_rotation: 86400
  
  allowed_tools:
    - sessions_spawn
    - sessions_send
    - memory_search
    - memory_get
    
  confirm_operations:
    - file_delete
    - exec_shell
    - gateway_restart

# ç›‘æ§ä¸æ—¥å¿—
monitoring:
  enabled: true
  heartbeat_interval: 60
  node_timeout: 300
  
  metrics:
    - api_latency
    - api_token_usage
    - cpu_utilization
    - ram_usage
    - gpu_utilization
    - queue_depth
    
logging:
  level: info
  file: ~/.openclaw/logs/sgc-command.log
  max_size: 500MB
  max_files: 10

# ç³»ç»Ÿé™åˆ¶
limits:
  max_concurrent_sessions: 50
  max_context_per_session: 262144
  max_file_upload: 100MB

# ğŸŒŸ SG-1 Team é›†æˆ
sg1_team:
  enabled: true
  config_path: ~/.openclaw/agents/sg1-team.yaml
  
  # SG-1å°é˜Ÿä½œä¸ºå­Agent
  sub_agents:
    - id: sg1-oneill
      name: "Jack O'Neill"
      role: team_leader
      model: zai/glm-5
      specialty: routing_coordination
      
    - id: sg1-jackson
      name: "Daniel Jackson"
      role: knowledge_expert
      model: zai/glm-5
      specialty: document_research
      hardware_affinity: large_memory
      
    - id: sg1-carter
      name: "Samantha Carter"
      role: technical_expert
      model: zai/glm-5
      specialty: code_engineering
      hardware_affinity: [multi_thread, gpu_compute]
      
    - id: sg1-tealc
      name: "Teal'c"
      role: security_expert
      model: zai/glm-5
      specialty: security_review
      
  # ä»»åŠ¡è‡ªåŠ¨è·¯ç”±åˆ°SG-1æˆå‘˜
  auto_route_to_sg1: true
  
  # è§¦å‘SG-1è·¯ç”±çš„ä»»åŠ¡ç±»å‹
  sg1_task_types:
    - code_generation     # -> Carter
    - document_analysis   # -> Jackson
    - security_review     # -> Teal'c
    - research            # -> Jackson
    - system_design       # -> Carter
    - code_review         # -> Teal'c
    
  # å¬å”¤å…³é”®è¯
  invocation_keywords:
    "@jack": sg1-oneill
    "@oneill": sg1-oneill
    "@daniel": sg1-jackson
    "@jackson": sg1-jackson
    "@sam": sg1-carter
    "@carter": sg1-carter
    "@tealc": sg1-tealc
    "@sg1": team_mode
