# ğŸš€ SG-1 Primary é…ç½®æ–‡ä»¶
# éƒ¨ç½²ä½ç½®: ~/.openclaw/fleet.yaml
# èŠ‚ç‚¹: ZD-PC (WSL2) - Xeon + RTX 3060
# æ¨¡å¼: APIæ¨¡å¼ (çº¯äº‘ç«¯LLM)

fleet:
  name: "SGC Expedition Fleet"
  node_id: sg1-primary
  role: worker
  worker_type: heavy_inference
  location: zd-pc-wsl2
  mode: api_only  # APIæ¨¡å¼ï¼Œä¸è¿è¡Œæœ¬åœ°æ¨¡å‹
  
# ç½‘ç»œé…ç½®
network:
  bind: 0.0.0.0  # ç›‘å¬æ‰€æœ‰æ¥å£ï¼Œå…è®¸SGCè®¿é—®
  port: 18789
  tailscale_ip: 100.64.0.2  # ä¿®æ”¹ä¸ºå®é™…Tailscale IP
  
  # ä¸Šæ¸¸èŠ‚ç‚¹
  upstream_node:
    endpoint: http://100.64.0.1:18789  # SGC Command
    token: ${SGC_TOKEN}
    
  # æœåŠ¡å‘ç°
  advertise_capabilities: true

# æ¨¡å‹é…ç½® (çº¯APIæ¨¡å¼)
models:
  # ä¸»è¦æä¾›å•† - æ™ºè°±AI
  provider: zai
  default: zai/glm-5
  
  # å¤‡é€‰æä¾›å•† - Moonshot
  fallback_provider: moonshot
  fallback: moonshot/k2.5
  
  # å¿«é€Ÿæ¨¡å‹
  fast: zai/glm-4.7-flash
  
  # é•¿ä¸Šä¸‹æ–‡æ¨¡å‹
  long_context: zai/glm-5
  
  # ä»£ç ä¸“ç”¨æ¨¡å‹
  code: zai/glm-5  # GLM-5ä»£ç èƒ½åŠ›ä¼˜ç§€
  
  api_config:
    timeout: 120
    retry: 3
    concurrent: 10

# æœ¬åœ°æ¨¡å‹é…ç½® (ç¦ç”¨)
ollama:
  enabled: false

# æ¨¡å‹é€‰æ‹©ç­–ç•¥
model_selection:
  default: zai/glm-5
  
  rules:
    - condition: "task_type == 'code' OR task_type == 'code_review'"
      model: zai/glm-5
      reasoning: on
      
    - condition: "speed_priority == true"
      model: zai/glm-4.7-flash
      
    - condition: "context_length > 100000"
      model: zai/glm-5
      
    - condition: "complexity == 'high' OR task_type == 'architecture'"
      model: zai/glm-5
      reasoning: on

# ç¡¬ä»¶èµ„æºç®¡ç† (ç”¨äºå…¶ä»–ä»»åŠ¡ï¼ŒéLLMæ¨ç†)
hardware:
  # GPUå¯ç”¨äºåµŒå…¥æ¨¡å‹æˆ–å…¶ä»–æœ¬åœ°AIä»»åŠ¡
  gpu:
    device: nvidia
    # å¯ç”¨äºæœ¬åœ°embeddingã€å›¾åƒå¤„ç†ç­‰
    use_for: [embedding, image_processing, local_ml]
    
  cpu:
    max_threads: 64  # ç•™8çº¿ç¨‹ç»™ç³»ç»Ÿ
    # ç”¨äºæ•°æ®å¤„ç†ã€ç¼–è¯‘ç­‰
    
  memory:
    max_ram_usage: 56GB  # ç•™6GBç»™ç³»ç»Ÿ
    # ç”¨äºå¤§æ–‡ä»¶å¤„ç†ã€RAGç­‰

# ä»»åŠ¡é˜Ÿåˆ—
queue:
  enabled: true
  max_depth: 50
  timeout: 300  # 5åˆ†é’Ÿè¶…æ—¶
  
  priority_levels:
    - critical: 1
    - high: 3
    - normal: 5
    - low: 10

# æ–‡ä»¶ç³»ç»Ÿ
filesystem:
  workspace: ~/.openclaw/workspace
  temp: /tmp/openclaw
  max_file_size: 500MB
  
  # å…è®¸å¤„ç†çš„å¤§æ–‡ä»¶ç±»å‹
  allowed_extensions:
    - .md
    - .txt
    - .py
    - .js
    - .json
    - .yaml
    - .pdf
    - .docx

# RAGé…ç½® (æœ¬åœ°embedding + API LLM)
rag:
  enabled: true
  vector_store: faiss
  # ä½¿ç”¨æœ¬åœ°embeddingæ¨¡å‹ (è½»é‡ï¼ŒGPUåŠ é€Ÿ)
  embedding_model: local/BAAI/bge-large-zh-v1.5
  
  # å¤§å†…å­˜ä¼˜åŠ¿
  max_document_size: 100MB
  chunk_size: 1000
  chunk_overlap: 200
  top_k: 5
  
  # RAGå®Œæˆåä½¿ç”¨API LLMç”Ÿæˆå›ç­”
  generation_model: zai/glm-5

# ä»£ç å·¥å…· (åˆ©ç”¨72çº¿ç¨‹ä¼˜åŠ¿)
code_tools:
  enabled: true
  
  compilation:
    parallel_jobs: 64
    timeout: 300
    
  languages:
    python:
      version: "3.10"
      venv_path: ~/.venvs
      
    nodejs:
      version: "22"
      
    rust:
      enabled: true
      
    cpp:
      compiler: g++
      std: c++17
      
  # ä»£ç åˆ†æå’Œé‡æ„ä½¿ç”¨API LLM
  analysis_model: zai/glm-5

# æµè§ˆå™¨é…ç½®
browser:
  enabled: true
  profile: openclaw
  headless: true
  no_sandbox: true
  
  # ç½‘é¡µå†…å®¹æŠ“å–åä½¿ç”¨API LLMåˆ†æ
  analysis_model: zai/glm-5

# å®‰å…¨è®¾ç½®
security:
  auth_mode: token
  accept_from:
    - sgc-command  # åªæ¥å—æ¥è‡ªæŒ‡æŒ¥ä¸­å¿ƒçš„ä»»åŠ¡
    
  sandbox:
    enabled: true
    allow_network: true
    allow_file_write: true
    max_disk_usage: 10GB

# APIå¯†é’¥ç®¡ç†
credentials:
  # åœ¨ ~/.openclaw/credentials/ ä¸­é…ç½®:
  # - zai.yaml: æ™ºè°±AI API key
  # - moonshot.yaml: Moonshot API key
  required:
    - zai
    - moonshot

# ç›‘æ§
monitoring:
  enabled: true
  
  metrics:
    - api_latency
    - api_token_usage
    - cpu_utilization
    - ram_usage
    - queue_depth
    - rag_query_time
    
  alerts:
    api_error_rate:
      threshold: 10  # 10%é”™è¯¯ç‡å‘Šè­¦
      action: notify_and_switch_provider
      
    high_ram:
      threshold: 90
      action: notify

# æ—¥å¿—
logging:
  level: info
  file: ~/.openclaw/logs/sg1-primary.log
  max_size: 500MB
  max_files: 10
  
  # è®°å½•APIè°ƒç”¨ç»Ÿè®¡
  log_api_stats: true
