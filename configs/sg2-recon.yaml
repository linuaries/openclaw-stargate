# ğŸ”­ SG-2 Recon é…ç½®æ–‡ä»¶
# éƒ¨ç½²ä½ç½®: ~/.openclaw/fleet.yaml
# èŠ‚ç‚¹: GPD MicroPC2 (DESKTOP-1156LM3)

fleet:
  name: "SGC Expedition Fleet"
  node_id: sg2-recon
  role: worker
  worker_type: mobile_recon
  location: gpd-micropc2
  
# ç½‘ç»œé…ç½®
network:
  bind: 0.0.0.0
  port: 18789
  tailscale_ip: 100.64.0.3  # ä¿®æ”¹ä¸ºå®é™…IP
  
  upstream_node:
    endpoint: http://100.64.0.1:18789  # SGC Command
    token: ${SGC_TOKEN}
    
  # ç¦»çº¿æ¨¡å¼æ£€æµ‹
  offline_detection:
    enabled: true
    check_interval: 30
    timeout: 10
    retries: 3

# æœ¬åœ°æ¨¡å‹é…ç½® (è½»é‡ç‰ˆOllama)
ollama:
  enabled: true
  host: http://localhost:11434
  
  models:
    # è¶…è½»é‡ - 3.8B Phi-3
    ultralight:
      name: phi3:mini
      alias: local-ultralight
      size: "~2GB"
      ram: 2048
      max_context: 4096
      use_case: "åŸºæœ¬å¯¹è¯ã€ç¦»çº¿ä½¿ç”¨"
      
    # ä¸­æ–‡ä¼˜åŒ– - 1.8B Qwen
    mobile:
      name: qwen2.5:1.8b
      alias: local-mobile
      size: "~1.5GB"
      ram: 1536
      max_context: 8192
      use_case: "ä¸­æ–‡ä»»åŠ¡ã€è½»é‡æ¨ç†"
      
    # æä½èµ„æº - 1.1B TinyLlama
    emergency:
      name: tinyllama:1.1b
      alias: local-emergency
      size: "~600MB"
      ram: 600
      max_context: 2048
      use_case: "ç´§æ€¥å¤‡ç”¨ã€æä½å†…å­˜"

# æ¨¡å‹é€‰æ‹©ç­–ç•¥
model_selection:
  default: local-mobile  # ä¸­æ–‡ä¼˜å…ˆ
  
  rules:
    - condition: "available_ram < 3GB"
      model: local-emergency
      
    - condition: "language == 'english' AND complexity == 'low'"
      model: local-ultralight
      
    - condition: "offline == true"
      model: local-mobile

# APIå¤‡ç”¨
models:
  provider: minimax-cn
  default: minimax-cn/MiniMax-M2.5
  fallback: zai/glm-4.7
  api_fallback: true
  
  # ç½‘ç»œä¸å¯ç”¨æ—¶è‡ªåŠ¨åˆ‡æ¢æœ¬åœ°
  auto_offline_switch: true

# ç¡¬ä»¶èµ„æºç®¡ç† (ä¸¥æ ¼é™åˆ¶)
hardware:
  cpu:
    max_threads: 3  # ç•™1çº¿ç¨‹ç»™ç³»ç»Ÿ
    thermal_throttle: true
    
  memory:
    max_ram_usage: 6GB  # ç•™1.6GBç»™ç³»ç»Ÿ
    swap_warning: 90
    
  # æ— GPUï¼Œçº¯CPUæ¨ç†
  gpu:
    enabled: false

# ç”µæºç®¡ç† (ç§»åŠ¨è®¾å¤‡)
power:
  battery_aware: true
  
  profiles:
    ac_power:
      max_threads: 3
      active_models: all
      
    battery_high:
      max_threads: 2
      active_models: [local-mobile, local-emergency]
      
    battery_low:
      max_threads: 1
      active_models: [local-emergency]
      disable_browser: true
      
    battery_critical:
      mode: sleep
      wake_on_message: true

# ä»»åŠ¡é˜Ÿåˆ—
queue:
  enabled: true
  max_depth: 10  # å°é˜Ÿåˆ—
  timeout: 120   # 2åˆ†é’Ÿè¶…æ—¶
  
  # è½»é‡ä»»åŠ¡é™åˆ¶
  max_tokens_per_task: 8000
  max_context_length: 8192

# æ–‡ä»¶ç³»ç»Ÿ
filesystem:
  workspace: ~/.openclaw/workspace
  temp: /tmp/openclaw
  max_file_size: 50MB
  
  # é™åˆ¶æ–‡ä»¶ç±»å‹
  allowed_extensions:
    - .md
    - .txt
    - .py
    - .json
    - .yaml

# æµè§ˆå™¨é…ç½® (GPDä¸Šæœ‰Chromium)
browser:
  enabled: true
  profile: openclaw
  headless: true
  no_sandbox: true
  
  # ç§»åŠ¨åœºæ™¯ä¸‹çš„è‡ªåŠ¨åŒ–
  use_cases:
    - web_fetch
    - form_filling
    - screenshot

# ç¦»çº¿æ¨¡å¼
offline:
  enabled: true
  
  # ç¦»çº¿æ—¶å¯ç”¨çš„åŠŸèƒ½
  capabilities:
    - local_chat
    - file_read
    - file_write
    - code_edit
    - basic_search (æœ¬åœ°æ–‡ä»¶)
    
  # ç¦»çº¿æ—¶ä¸å¯ç”¨çš„åŠŸèƒ½
  disabled_capabilities:
    - web_search
    - web_fetch
    - api_models
    - sessions_spawn (å¤–éƒ¨èŠ‚ç‚¹)
  
  # ç½‘ç»œæ¢å¤ååŒæ­¥
  sync_on_reconnect:
    - memory_updates
    - task_queue_status
    - metrics

# ä¾¿æºç‰¹æ€§
portable:
  quick_start: true
  suspend_on_lid_close: true
  resume_on_lid_open: true
  
  # å¿«é€Ÿå”¤é†’é…ç½®
  keep_alive_models:
    - local-mobile  # ä¿æŒå°æ¨¡å‹å¸¸é©»å†…å­˜
    
  hot_standby_timeout: 300  # 5åˆ†é’Ÿæ— ä»»åŠ¡è¿›å…¥å¾…æœº

# å®‰å…¨è®¾ç½®
security:
  auth_mode: token
  accept_from:
    - sgc-command
    - self  # å…è®¸æœ¬åœ°ç›´æ¥è®¿é—®
    
  # ç§»åŠ¨è®¾å¤‡é¢å¤–å®‰å…¨
  auto_lock:
    enabled: false  # å¯è‡ªè¡Œå¯ç”¨
    timeout: 300
    
  encryption:
    memory_files: false  # æ€§èƒ½è€ƒè™‘
    credentials: true

# ç›‘æ§ (è½»é‡)
monitoring:
  enabled: true
  
  metrics:
    - cpu_utilization
    - ram_usage
    - battery_level
    - network_status
    
  alerts:
    low_battery:
      threshold: 20
      action: notify_and_throttle
      
    high_temp:
      threshold: 80
      action: throttle

# æ—¥å¿—
logging:
  level: info
  file: ~/.openclaw/logs/sg2-recon.log
  max_size: 100MB
  max_files: 3
  
  # ç§»åŠ¨åœºæ™¯æ—¥å¿—å‹ç¼©
  compress_old: true
